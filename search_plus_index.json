{"./":{"url":"./","title":"概要","keywords":"","body":"1. PrismCascade とは 動画編集の基盤システム プラグイン同士をつなげ合わせることで柔軟な編集を目指す GUIの有無やOSにかかわらず動作可能なものを目指す 2. 基本構成 core 動画編集の制御を行う。 C++ライブラリの形で提供。 plugin 動画に対する操作の本体 Windowsでは .dll ファイル，Linuxでは .so ファイル UI 動画編集の補助やプレビューなどを行う。 coreに対して具体的な操作を要求する。 GUI と CUI 両方を作成予定 3. プラグインの種別 plugins/ 以下に存在する dll / so ファイルを探索し，プラグインとして読み込む。 プラグインには Effect と Macro が存在する。 基本的には， Effect プラグインを組み合わせることで映像編集を行う。 各プラグインは1つの主出力と，0～∞個の副出力を持つ 各プラグインはパラメータをいくつか持つことが出来て，以下の3つの方法で値を入力できる。 値の直接指定 他の Effect プラグインの埋め込み 他の Effect プラグインの副出力の参照 4. 目指す物 プラットフォーム非依存 少なくとも Windows, Linux で動作する物を目指す UI と 処理の分離 将来的にUIを差し替えたり自動処理スクリプトからの呼び出し等をする際に，互換性を容易に保てる コミュニティによりプラグインが活発に作成される状態を目指す 5. 開発理念 拡張性重視 本体の機能を簡潔にする プラグインを中心に添える 堅牢な設計 型検査をする 全てのUI操作をエフェクトASTの操作と対応させる 1. PrismCascade とは2. 基本構成3. プラグインの種別4. 目指す物5. 開発理念"},"architecture/types.html":{"url":"architecture/types.html","title":"型","keywords":"","body":"1. 型 1.1. 基本型 Int C++ の std::int64_t 型と対応 Bool C++ の bool 型と対応 Float C++ の double 型と対応 Text 文字列 （2^32 バイト未満） Video 映像型 height, width は 2^32 未満 フレーム数は 2^64 未満 将来的に生放送に対応した場合に桁あふれを防ぐために多めに桁数を持たせている Audio 音声型 詳細は未定 Vector 上記の型の可変長配列 （2^32 個未満） 中に Vector は入れられない 1. 型1.1. 基本型"},"architecture/ast.html":{"url":"architecture/ast.html","title":"抽象構文木","keywords":"","body":"1. 抽象構文木 (AST) 1.1. 入力 各ノードは任意個の入力を持つ 入力に取れるのは以下のいずれか 即値 他プラグインの主出力 自分のみが取得できる 他プラグインの副出力 任意個の入力で共有できる 1.2. 出力 各ノードは1個以上の出力を持つ 最初の出力は「主出力」であり，UI上でも親子関係を構築する 2番目以降の出力は「副出力」であり，任意の場所から参照できる ただし，循環を作ることは許可されない 1.3. 木構造 Effect のプラグインをノードとし，主出力の入力を親子関係とする木を構築する 値の上書き等で主出力を上書きした際には，ASTノードごと消滅する （副出力も消える） 2. 代入 代入によりASTノードが消滅することがある サブツリーとメインツリーに分け，間に存在する副出力の参照を全て切断する処理をしている Undo と Redo では，再び繋ぎなおす必要がある （2025/04/08 時点で未実装） 3. マクロ Macro のプラグインは AST を生成できる （2025/04/08 時点で未実装） 実体を生み出すわけではなく，レンダリング時のみ生成される仮のサブツリーを生成する 実体化した上で，手動で編集することもできる 4. スケジューリング 4.1. トポロジカルソート 主出力と副出力両方の参照関係を用いて，トポロジカルソートを行う。 トポロジカルソートに失敗した場合にはスケジューリング不能としてレンダリングに失敗する 1フレームずつ，順に呼び出すことで各フレームを生成する 4.2. 非因果的システム 例えば逆再生などは代表的な非因果的システム 入力パラメータ全体について，未来の値を取れる必要がある トポロジカルソート結果を，非因果的システムを根とするノード群に切り分ける それらを1フレームずつ，順に呼び出して各フレームを生成する 後続の処理で使う変数のみ，全フレーム分を保持する 1. 抽象構文木 (AST)1.1. 入力1.2. 出力1.3. 木構造2. 代入3. マクロ4. スケジューリング4.1. トポロジカルソート4.2. 非因果的システム"},"architecture/issues.html":{"url":"architecture/issues.html","title":"バグ","keywords":"","body":"1. 既知の不具合 AST 「Aの子であるC」をBの子にした場合，Aの該当値をリセットする必要がある サブツリーとメインツリーに同時に存在するのを許すと，統合時の計算量が増えるため，許可しない方針（詳細は要検討） Aの子にAが来ている場合，ASTとして構築できてしまう AをAの子孫にしなければよいので，parentを辿ってAが居ないかをチェックする必要がある サブツリー統合時には，すべてのノードについてチェックする必要がある 1. 既知の不具合"}}